var __hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;}c.prototype=b.prototype;
d.prototype=new c();d.__super__=b.prototype;return d;};(function(e){var f,b,a,d,c;a=(function(){function g(){}g.prototype.errorList=[];g.prototype.lastError=function(){return this.errorList[this.errorList.length-1];
};g.prototype.browser=window.navigator.userAgent;g.prototype.push=function(h){this.errorList.push(h);return this.added();};g.prototype.added=function(){return null;
};g.prototype.clear=function(){return this.errorList=[];};return g;})();f=(function(g){__extends(h,g);function h(){c=h.__super__.constructor.apply(this,arguments);
return c;}h.prototype.added=function(){return console.log(this.lastError);};return h;})(a);b=(function(h){__extends(g,h);function g(i){if(i==null){i={el:"",displayEach:false};
}this.el=i.el;this.displayEach=i.displayEach;}g.prototype.added=function(){if(this.displayEach){return this.display(this.lastError());}};g.prototype.send=function(){var l,m,k,i,j;
if(!this.displayEach){i=this.errorList;j=[];for(m=0,k=i.length;m<k;m++){l=i[m];j.push(this.display(l));}return j;}};g.prototype.display=function(i){return e(this.el).append("<p>message: "+i.message+" <br />url: "+i.url+", lineNumber: "+i.line+"<br /> browser: "+this.browser);
};return g;})(a);d=(function(g){__extends(h,g);function h(i){if(i==null){i={url:null,method:"POST"};}this.url=i.url;this.method=i.method;}h.prototype.jsonToSend=function(){var i;
i={browser:this.browser,errors:this.errorList};return JSON.stringify(i);};h.prototype.send=function(){var i;if(window.XMLHttpRequest){i=new XMLHttpRequest();
i.open(this.method,this.url,true);i.setRequestHeader("Content-Type","text/plain;charset=UTF-8");return i.send(this.jsonToSend());}};return h;})(a);e.errorLogger=function(h,g){var i=this;
this.version="1.0.0";this.options={};this.init=function(k,j){this.options=e.extend({},e.errorLogger.defaultOptions,j);this.logger=this.selectLogger();window.onerror=this.errorHandler;
if(this.options.sendOnDomReady){e(window).load(this.afterDomReady);}return this.initSending();};return{selectLogger:function(){if(typeof i.options.logger==="string"){switch(i.options.logger){case"debug":return new b(i.options.debugLoggerOptions);
case"net":return new d(i.options.netLoggerOptions);default:return new f();}}else{return i.options.logger;}},initSending:function(){var j;j=function(){if(!i.options.sendOnDomReady){i.send();
}return setTimeout(j,i.options.sendDelay);};return setTimeout(j,i.options.sendDelay);},send:function(){if(this.options.logger.errorList.length>0){this.options.logger.send();
return this.options.logger.clear();}},afterDomReady:function(){i.send();return i.options.sendOnDomReady=false;},errorHandler:function(m,k,j){var l;l={message:m,url:k,line:j};
if((i.options.onError!=null)&&typeof i.options.onError==="function"){i.options.onError(l);}i.logger.push(l);return !i.options.propagateErrors;}};};e.fn.errorLogger=function(g){return new e.errorLogger(this,g);
};return e.errorLogger.defaultOptions={logger:null,propagateErrors:false,onErrorFn:null,sendOnDomReady:true,sendDelay:2000,debugLoggerOptions:{el:"#ErrorLogger",displayEach:true},netLoggerOptions:{method:"POST",url:"/errorlogger"}};
})(jQuery);